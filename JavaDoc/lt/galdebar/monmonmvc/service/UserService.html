<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (12.0.2) on Wed Apr 08 11:46:30 EEST 2020 -->
<title>UserService</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-04-08">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="UserService";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UserService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">lt.galdebar.monmonmvc.service</a></div>
<h2 title="Class UserService" class="title">Class UserService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>lt.galdebar.monmonmvc.service.UserService</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>@Service
public class <span class="typeNameLabel">UserService</span>
extends java.lang.Object</pre>
<div class="block">Handles initial login checks, communicates with user Repositories for user CRUD operations.
 Communicates with Token Service for user registration, token renewal, user link and deletion.
 Handles password encoding when creating user entry in DB by utilizing an Autowired password Encoder (uses Bcrypt)</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">UserService</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changePassword(lt.galdebar.monmonmvc.persistence.domain.dto.PasswordChangeRequestDTO)">changePassword</a></span>&#8203;(<a href="../persistence/domain/dto/PasswordChangeRequestDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">PasswordChangeRequestDTO</a>&nbsp;passwordChangeRequestDTO)</code></th>
<td class="colLast">
<div class="block">Change password.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeUserEmail(lt.galdebar.monmonmvc.persistence.domain.dto.EmailChangeRequestDTO)">changeUserEmail</a></span>&#8203;(<a href="../persistence/domain/dto/EmailChangeRequestDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">EmailChangeRequestDTO</a>&nbsp;emailChangeRequestDTO)</code></th>
<td class="colLast">
<div class="block">Calls for user email change token creation.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkIfUserIsPendingDeletion(java.lang.String)">checkIfUserIsPendingDeletion</a></span>&#8203;(java.lang.String&nbsp;subject)</code></th>
<td class="colLast">
<div class="block">Check if user is pending deletion.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#confirmLinkUsers(java.lang.String)">confirmLinkUsers</a></span>&#8203;(java.lang.String&nbsp;token)</code></th>
<td class="colLast">
<div class="block">Finalize user link.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#confirmRegistration(java.lang.String)">confirmRegistration</a></span>&#8203;(java.lang.String&nbsp;token)</code></th>
<td class="colLast">
<div class="block">Finalize registration.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#confirmUserEmailChange(java.lang.String)">confirmUserEmailChange</a></span>&#8203;(java.lang.String&nbsp;token)</code></th>
<td class="colLast">
<div class="block">Finalize user email change and save change to Repo.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteUsers(java.util.List)">deleteUsers</a></span>&#8203;(java.util.List&lt;<a href="../persistence/domain/dto/UserDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">UserDTO</a>&gt;&nbsp;userDTOS)</code></th>
<td class="colLast">
<div class="block">Delete users.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code><a href="../persistence/domain/entities/UserEntity.html" title="class in lt.galdebar.monmonmvc.persistence.domain.entities">UserEntity</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findByUserEmail(java.lang.String)">findByUserEmail</a></span>&#8203;(java.lang.String&nbsp;userEmail)</code></th>
<td class="colLast">
<div class="block">Find User by email.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>java.util.List&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLinkedUsers()">getLinkedUsers</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets linked users of the currently logged in user.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>java.util.List&lt;<a href="../persistence/domain/dto/UserDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">UserDTO</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUsersPendingDeletion()">getUsersPendingDeletion</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets all users pending deletion.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#linkUserWithCurrent(lt.galdebar.monmonmvc.persistence.domain.dto.UserDTO)">linkUserWithCurrent</a></span>&#8203;(<a href="../persistence/domain/dto/UserDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">UserDTO</a>&nbsp;userToConnect)</code></th>
<td class="colLast">
<div class="block">Link another user with current.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code><a href="../persistence/domain/dto/AuthTokenDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">AuthTokenDTO</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#login(lt.galdebar.monmonmvc.persistence.domain.dto.LoginAttemptDTO)">login</a></span>&#8203;(<a href="../persistence/domain/dto/LoginAttemptDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">LoginAttemptDTO</a>&nbsp;loginAttemptDTO)</code></th>
<td class="colLast">
<div class="block">User credential check and user token generation using jwtTokenProvider.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markUserForDeletion()">markUserForDeletion</a></span>()</code></th>
<td class="colLast">
<div class="block">Mark user for deletion, set grace period.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#registerNewUser(lt.galdebar.monmonmvc.persistence.domain.dto.LoginAttemptDTO)">registerNewUser</a></span>&#8203;(<a href="../persistence/domain/dto/LoginAttemptDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">LoginAttemptDTO</a>&nbsp;registrationAttempt)</code></th>
<td class="colLast">
<div class="block">Create user entity, save it to DB, request registration token creation and request registration mail send.</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#renewLinkUsersToken(java.lang.String)">renewLinkUsersToken</a></span>&#8203;(java.lang.String&nbsp;token)</code></th>
<td class="colLast">
<div class="block">Renew link users token.</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#renewRegistrationToken(java.lang.String)">renewRegistrationToken</a></span>&#8203;(java.lang.String&nbsp;token)</code></th>
<td class="colLast">
<div class="block">Renew user registration token.</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#unlinkUsers(lt.galdebar.monmonmvc.persistence.domain.dto.UserDTO,lt.galdebar.monmonmvc.persistence.domain.dto.UserDTO)">unlinkUsers</a></span>&#8203;(<a href="../persistence/domain/dto/UserDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">UserDTO</a>&nbsp;userA,
           <a href="../persistence/domain/dto/UserDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">UserDTO</a>&nbsp;userB)</code></th>
<td class="colLast">
<div class="block">Unlink users.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UserService</h4>
<pre>public&nbsp;UserService()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="login(lt.galdebar.monmonmvc.persistence.domain.dto.LoginAttemptDTO)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>login</h4>
<pre class="methodSignature">@Transactional
public&nbsp;<a href="../persistence/domain/dto/AuthTokenDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">AuthTokenDTO</a>&nbsp;login&#8203;(<a href="../persistence/domain/dto/LoginAttemptDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">LoginAttemptDTO</a>&nbsp;loginAttemptDTO)
                   throws <a href="exceptions/login/UserNotValidated.html" title="class in lt.galdebar.monmonmvc.service.exceptions.login">UserNotValidated</a>,
                          <a href="exceptions/login/UserNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.login">UserNotFound</a></pre>
<div class="block">User credential check and user token generation using jwtTokenProvider. Cancels user deletion if it is set.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>loginAttemptDTO</code> - Carries user email and password (non-encrypted)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Auth token</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/login/UserNotValidated.html" title="class in lt.galdebar.monmonmvc.service.exceptions.login">UserNotValidated</a></code> - If user tries to login before confirming registration.</dd>
<dd><code><a href="exceptions/login/UserNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.login">UserNotFound</a></code> - If user not found</dd>
</dl>
</li>
</ul>
<a id="findByUserEmail(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findByUserEmail</h4>
<pre class="methodSignature">public&nbsp;<a href="../persistence/domain/entities/UserEntity.html" title="class in lt.galdebar.monmonmvc.persistence.domain.entities">UserEntity</a>&nbsp;findByUserEmail&#8203;(java.lang.String&nbsp;userEmail)
                           throws <a href="exceptions/login/UserNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.login">UserNotFound</a></pre>
<div class="block">Find User by email.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>userEmail</code> - Email</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Found user. Is never null.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/login/UserNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.login">UserNotFound</a></code> - If user not found.</dd>
</dl>
</li>
</ul>
<a id="registerNewUser(lt.galdebar.monmonmvc.persistence.domain.dto.LoginAttemptDTO)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerNewUser</h4>
<pre class="methodSignature">@Transactional
public&nbsp;void&nbsp;registerNewUser&#8203;(<a href="../persistence/domain/dto/LoginAttemptDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">LoginAttemptDTO</a>&nbsp;registrationAttempt)
                     throws <a href="exceptions/registration/UserAlreadyExists.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">UserAlreadyExists</a></pre>
<div class="block">Create user entity, save it to DB, request registration token creation and request registration mail send.
 Encrypts password before sending to Repo.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>registrationAttempt</code> - Contains user email and password (non-encrypted)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/registration/UserAlreadyExists.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">UserAlreadyExists</a></code> - If user already exists (whether fully validated or not)</dd>
</dl>
</li>
</ul>
<a id="confirmRegistration(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>confirmRegistration</h4>
<pre class="methodSignature">@Transactional
public&nbsp;boolean&nbsp;confirmRegistration&#8203;(java.lang.String&nbsp;token)
                            throws <a href="exceptions/registration/TokenNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenNotFound</a>,
                                   <a href="exceptions/registration/UserAlreadyValidated.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">UserAlreadyValidated</a>,
                                   <a href="exceptions/registration/TokenExpired.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenExpired</a></pre>
<div class="block">Finalize registration. Allows user to log in.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>token</code> - the token</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the boolean</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/registration/TokenNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenNotFound</a></code> - the token not found</dd>
<dd><code><a href="exceptions/registration/UserAlreadyValidated.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">UserAlreadyValidated</a></code> - the user already validated</dd>
<dd><code><a href="exceptions/registration/TokenExpired.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenExpired</a></code> - the token expired</dd>
</dl>
</li>
</ul>
<a id="changeUserEmail(lt.galdebar.monmonmvc.persistence.domain.dto.EmailChangeRequestDTO)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeUserEmail</h4>
<pre class="methodSignature">@Transactional
public&nbsp;void&nbsp;changeUserEmail&#8203;(<a href="../persistence/domain/dto/EmailChangeRequestDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">EmailChangeRequestDTO</a>&nbsp;emailChangeRequestDTO)
                     throws <a href="exceptions/registration/UserAlreadyExists.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">UserAlreadyExists</a></pre>
<div class="block">Calls for user email change token creation. Calls for email change confirmation email to be sent.
 Doesn't actually change the user Email untill confirmed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>emailChangeRequestDTO</code> - contains new email</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/registration/UserAlreadyExists.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">UserAlreadyExists</a></code> - email address taken</dd>
</dl>
</li>
</ul>
<a id="confirmUserEmailChange(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>confirmUserEmailChange</h4>
<pre class="methodSignature">@Transactional
public&nbsp;boolean&nbsp;confirmUserEmailChange&#8203;(java.lang.String&nbsp;token)
                               throws <a href="exceptions/registration/TokenNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenNotFound</a>,
                                      <a href="exceptions/registration/TokenExpired.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenExpired</a></pre>
<div class="block">Finalize user email change and save change to Repo.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>token</code> - the token</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the boolean</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/registration/TokenNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenNotFound</a></code> - the token not found</dd>
<dd><code><a href="exceptions/registration/TokenExpired.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenExpired</a></code> - the token expired</dd>
</dl>
</li>
</ul>
<a id="renewRegistrationToken(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renewRegistrationToken</h4>
<pre class="methodSignature">@Transactional
public&nbsp;void&nbsp;renewRegistrationToken&#8203;(java.lang.String&nbsp;token)
                            throws <a href="exceptions/registration/UserAlreadyValidated.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">UserAlreadyValidated</a>,
                                   <a href="exceptions/registration/TokenNotExpired.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenNotExpired</a>,
                                   <a href="exceptions/registration/TokenNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenNotFound</a></pre>
<div class="block">Renew user registration token.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>token</code> - the token</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/registration/UserAlreadyValidated.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">UserAlreadyValidated</a></code> - the user already validated</dd>
<dd><code><a href="exceptions/registration/TokenNotExpired.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenNotExpired</a></code> - the token not expired</dd>
<dd><code><a href="exceptions/registration/TokenNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.registration">TokenNotFound</a></code> - the token not found</dd>
</dl>
</li>
</ul>
<a id="changePassword(lt.galdebar.monmonmvc.persistence.domain.dto.PasswordChangeRequestDTO)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changePassword</h4>
<pre class="methodSignature">@Transactional
public&nbsp;void&nbsp;changePassword&#8203;(<a href="../persistence/domain/dto/PasswordChangeRequestDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">PasswordChangeRequestDTO</a>&nbsp;passwordChangeRequestDTO)
                    throws org.springframework.security.authentication.BadCredentialsException</pre>
<div class="block">Change password.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>passwordChangeRequestDTO</code> - Contains user email (for additional validation), old and new password.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.springframework.security.authentication.BadCredentialsException</code> - if old password is incorrect</dd>
</dl>
</li>
</ul>
<a id="markUserForDeletion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markUserForDeletion</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;markUserForDeletion()</pre>
<div class="block">Mark user for deletion, set grace period. Calls for email warning to be sent.</div>
</li>
</ul>
<a id="getUsersPendingDeletion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUsersPendingDeletion</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../persistence/domain/dto/UserDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">UserDTO</a>&gt;&nbsp;getUsersPendingDeletion()</pre>
<div class="block">Gets all users pending deletion. Checks user's toBeDeleted = true and if deletion date is before the method call.
 This method is called by Task scheduler.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the users pending deletion</dd>
</dl>
</li>
</ul>
<a id="deleteUsers(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteUsers</h4>
<pre class="methodSignature">@Transactional
public&nbsp;void&nbsp;deleteUsers&#8203;(java.util.List&lt;<a href="../persistence/domain/dto/UserDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">UserDTO</a>&gt;&nbsp;userDTOS)</pre>
<div class="block">Delete users. Final deletion from DB.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>userDTOS</code> - list of users to be deleted</dd>
</dl>
</li>
</ul>
<a id="getLinkedUsers()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLinkedUsers</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;java.lang.String&gt;&nbsp;getLinkedUsers()</pre>
<div class="block">Gets linked users of the currently logged in user.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>String list of found users. Can be empty, is never null.</dd>
</dl>
</li>
</ul>
<a id="linkUserWithCurrent(lt.galdebar.monmonmvc.persistence.domain.dto.UserDTO)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>linkUserWithCurrent</h4>
<pre class="methodSignature">@Transactional
public&nbsp;void&nbsp;linkUserWithCurrent&#8203;(<a href="../persistence/domain/dto/UserDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">UserDTO</a>&nbsp;userToConnect)
                         throws <a href="exceptions/login/UserNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.login">UserNotFound</a>,
                                <a href="exceptions/login/UserNotValidated.html" title="class in lt.galdebar.monmonmvc.service.exceptions.login">UserNotValidated</a>,
                                <a href="exceptions/linkusers/LinkUsersMatch.html" title="class in lt.galdebar.monmonmvc.service.exceptions.linkusers">LinkUsersMatch</a></pre>
<div class="block">Link another user with current. Doesn't save any changes to DB (need confirmation for that).
 Calls for email to be sent to the other user to confirm user link.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>userToConnect</code> - the user to connect</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/login/UserNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.login">UserNotFound</a></code> - the user not found</dd>
<dd><code><a href="exceptions/login/UserNotValidated.html" title="class in lt.galdebar.monmonmvc.service.exceptions.login">UserNotValidated</a></code> - the user not validated</dd>
<dd><code><a href="exceptions/linkusers/LinkUsersMatch.html" title="class in lt.galdebar.monmonmvc.service.exceptions.linkusers">LinkUsersMatch</a></code> - current user and user to connect are the same</dd>
</dl>
</li>
</ul>
<a id="confirmLinkUsers(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>confirmLinkUsers</h4>
<pre class="methodSignature">@Transactional
public&nbsp;void&nbsp;confirmLinkUsers&#8203;(java.lang.String&nbsp;token)
                      throws <a href="exceptions/linkusers/LinkUsersTokenNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.linkusers">LinkUsersTokenNotFound</a>,
                             <a href="exceptions/linkusers/LinkUsersTokenExpired.html" title="class in lt.galdebar.monmonmvc.service.exceptions.linkusers">LinkUsersTokenExpired</a></pre>
<div class="block">Finalize user link. Saves changes for both users to DB.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>token</code> - the token</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/linkusers/LinkUsersTokenNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.linkusers">LinkUsersTokenNotFound</a></code> - the link users token not found</dd>
<dd><code><a href="exceptions/linkusers/LinkUsersTokenExpired.html" title="class in lt.galdebar.monmonmvc.service.exceptions.linkusers">LinkUsersTokenExpired</a></code> - the link users token expired</dd>
</dl>
</li>
</ul>
<a id="renewLinkUsersToken(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renewLinkUsersToken</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;renewLinkUsersToken&#8203;(java.lang.String&nbsp;token)
                         throws <a href="exceptions/linkusers/LinkUsersTokenExpired.html" title="class in lt.galdebar.monmonmvc.service.exceptions.linkusers">LinkUsersTokenExpired</a>,
                                <a href="exceptions/linkusers/LinkUsersTokenNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.linkusers">LinkUsersTokenNotFound</a></pre>
<div class="block">Renew link users token.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>token</code> - the token</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="exceptions/linkusers/LinkUsersTokenExpired.html" title="class in lt.galdebar.monmonmvc.service.exceptions.linkusers">LinkUsersTokenExpired</a></code> - the link users token expired</dd>
<dd><code><a href="exceptions/linkusers/LinkUsersTokenNotFound.html" title="class in lt.galdebar.monmonmvc.service.exceptions.linkusers">LinkUsersTokenNotFound</a></code> - the link users token not found</dd>
</dl>
</li>
</ul>
<a id="unlinkUsers(lt.galdebar.monmonmvc.persistence.domain.dto.UserDTO,lt.galdebar.monmonmvc.persistence.domain.dto.UserDTO)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlinkUsers</h4>
<pre class="methodSignature">@Transactional
public&nbsp;void&nbsp;unlinkUsers&#8203;(<a href="../persistence/domain/dto/UserDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">UserDTO</a>&nbsp;userA,
                        <a href="../persistence/domain/dto/UserDTO.html" title="class in lt.galdebar.monmonmvc.persistence.domain.dto">UserDTO</a>&nbsp;userB)</pre>
<div class="block">Unlink users.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>userA</code> - the user a</dd>
<dd><code>userB</code> - the user b</dd>
</dl>
</li>
</ul>
<a id="checkIfUserIsPendingDeletion(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>checkIfUserIsPendingDeletion</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;checkIfUserIsPendingDeletion&#8203;(java.lang.String&nbsp;subject)</pre>
<div class="block">Check if user is pending deletion.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>subject</code> - user email.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the boolean</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UserService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
